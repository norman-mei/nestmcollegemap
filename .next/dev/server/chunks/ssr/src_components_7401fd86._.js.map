{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kirk/Downloads/Coding%20Projects/collegemaptest/src/components/sidebar/SidebarContainer.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { cn } from '@/lib/utils';\n\nexport default function SidebarContainer({ children }: { children: React.ReactNode }) {\n  const [width, setWidth] = useState<number>(400);\n  const [isResizing, setIsResizing] = useState(false);\n  const sidebarRef = useRef<HTMLDivElement>(null);\n\n  const startResizing = React.useCallback(() => {\n    setIsResizing(true);\n  }, []);\n\n  const stopResizing = React.useCallback(() => {\n    setIsResizing(false);\n  }, []);\n\n  const resize = React.useCallback((mouseMoveEvent: MouseEvent) => {\n    if (isResizing) {\n      const newWidth = mouseMoveEvent.clientX;\n      if (newWidth > 300 && newWidth < 800) {\n          setWidth(newWidth);\n          if (typeof window !== 'undefined') {\n            window.localStorage.setItem('sidebar-width', String(newWidth));\n          }\n      }\n    }\n  }, [isResizing]);\n\n  useEffect(() => {\n    // apply stored width after mount to avoid SSR mismatch\n    if (typeof window !== 'undefined') {\n      const stored = window.localStorage.getItem('sidebar-width');\n      const parsed = stored ? parseInt(stored, 10) : NaN;\n      if (parsed && parsed > 300 && parsed < 800) {\n        setWidth(parsed);\n      }\n    }\n\n    window.addEventListener(\"mousemove\", resize);\n    window.addEventListener(\"mouseup\", stopResizing);\n    return () => {\n      window.removeEventListener(\"mousemove\", resize);\n      window.removeEventListener(\"mouseup\", stopResizing);\n    };\n  }, [resize, stopResizing]);\n\n  return (\n    <div className=\"flex h-full relative z-20 shadow-xl\" style={{ width: width }}>\n      <div \n        ref={sidebarRef}\n        className=\"flex-1 bg-gray-50 dark:bg-neutral-900 border-r border-gray-300 dark:border-neutral-800 h-full flex flex-col overflow-hidden\"\n      >\n        {children}\n      </div>\n      <div\n        className=\"w-1 bg-gray-300 dark:bg-neutral-800 hover:bg-blue-500 cursor-col-resize transition-colors\"\n        onMouseDown={startResizing}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAKe,SAAS,iBAAiB,EAAE,QAAQ,EAAiC;IAClF,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAS;IAC3C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,aAAa,IAAA,+MAAM,EAAiB;IAE1C,MAAM,gBAAgB,gNAAK,CAAC,WAAW,CAAC;QACtC,cAAc;IAChB,GAAG,EAAE;IAEL,MAAM,eAAe,gNAAK,CAAC,WAAW,CAAC;QACrC,cAAc;IAChB,GAAG,EAAE;IAEL,MAAM,SAAS,gNAAK,CAAC,WAAW,CAAC,CAAC;QAChC,IAAI,YAAY;YACd,MAAM,WAAW,eAAe,OAAO;YACvC,IAAI,WAAW,OAAO,WAAW,KAAK;gBAClC,SAAS;gBACT;;YAGJ;QACF;IACF,GAAG;QAAC;KAAW;IAEf,IAAA,kNAAS,EAAC;QACR,uDAAuD;QACvD;;QAQA,OAAO,gBAAgB,CAAC,aAAa;QACrC,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO;YACL,OAAO,mBAAmB,CAAC,aAAa;YACxC,OAAO,mBAAmB,CAAC,WAAW;QACxC;IACF,GAAG;QAAC;QAAQ;KAAa;IAEzB,qBACE,8OAAC;QAAI,WAAU;QAAsC,OAAO;YAAE,OAAO;QAAM;;0BACzE,8OAAC;gBACC,KAAK;gBACL,WAAU;0BAET;;;;;;0BAEH,8OAAC;gBACC,WAAU;gBACV,aAAa;;;;;;;;;;;;AAIrB"}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kirk/Downloads/Coding%20Projects/collegemaptest/src/components/sidebar/StudentList.tsx"],"sourcesContent":["'use client';\n\nimport React, { useMemo, useState, useEffect } from 'react';\nimport { useFilters } from '@/contexts/FilterContext';\nimport { useUI } from '@/contexts/UIContext';\nimport { ProcessedStudent } from '@/lib/types';\nimport { GRAD_CLASS_COLORS } from '@/lib/constants';\n\ntype CollapsedState = Record<string, boolean>;\n\nexport default function StudentList() {\n  const { filteredStudents, filterState, setFilterState } = useFilters();\n  const { openPhotoPopup, setActiveHoverId, activeHoverId } = useUI();\n  const [isGallery, setIsGallery] = useState(false);\n  const [collapsedClasses, setCollapsedClasses] = useState<CollapsedState>(() => {\n    if (typeof window === 'undefined') return {};\n    try {\n      return JSON.parse(localStorage.getItem('collapsedGradClasses') || '{}') || {};\n    } catch {\n      return {};\n    }\n  });\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n    localStorage.setItem('collapsedGradClasses', JSON.stringify(collapsedClasses));\n  }, [collapsedClasses]);\n\n  const groupedByGrad = useMemo(() => {\n    const groups = new Map<string, ProcessedStudent[]>();\n    filteredStudents.forEach((s) => {\n      const key = s.gradClass;\n      if (!groups.has(key)) groups.set(key, []);\n      groups.get(key)!.push(s);\n    });\n    return Array.from(groups.entries()).sort(([a], [b]) => a.localeCompare(b));\n  }, [filteredStudents]);\n\n  const handleSearch = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFilterState((prev) => ({ ...prev, searchQuery: e.target.value }));\n  };\n\n  const toggleClass = (gradClass: string) => {\n    setCollapsedClasses((prev) => ({ ...prev, [gradClass]: !prev[gradClass] }));\n  };\n\n  const ListItem = ({ student }: { student: ProcessedStudent }) => {\n    const color = GRAD_CLASS_COLORS[student.gradClass] || '#ccc';\n    const isHovered = activeHoverId === student.id;\n    return (\n      <div\n        className={`px-4 py-2 border-b border-gray-200 dark:border-neutral-800 transition-colors cursor-pointer ${\n          isHovered ? 'bg-blue-50 dark:bg-blue-900/20' : 'hover:bg-gray-100 dark:hover:bg-neutral-800'\n        }`}\n        onClick={(e) => openPhotoPopup(student, e.currentTarget.getBoundingClientRect())}\n        onMouseEnter={(e) => {\n          setActiveHoverId(student.id);\n          openPhotoPopup(student, e.currentTarget.getBoundingClientRect());\n        }}\n        onMouseLeave={() => setActiveHoverId(null)}\n      >\n        <div className=\"flex justify-between items-start\">\n          <div>\n            <span className=\"font-bold text-gray-900 dark:text-gray-100\">{student.seniorName}</span>\n            <span\n              className=\"ml-2 text-xs font-bold px-1.5 py-0.5 rounded text-white\"\n              style={{ backgroundColor: color }}\n            >\n              {student.gradClass}\n            </span>\n          </div>\n        </div>\n        <div className=\"text-sm text-blue-600 dark:text-blue-400 font-medium\">{student.collegeName}</div>\n        <div className=\"text-xs text-gray-500 dark:text-gray-400\">{student.major || 'Undecided'}</div>\n      </div>\n    );\n  };\n\n  const GalleryItem = ({ student }: { student: ProcessedStudent }) => (\n    <div\n      className=\"relative aspect-square bg-gray-200 dark:bg-neutral-800 rounded overflow-hidden group cursor-pointer\"\n      onClick={(e) => openPhotoPopup(student, e.currentTarget.getBoundingClientRect())}\n      onMouseEnter={() => setActiveHoverId(student.id)}\n      onMouseLeave={() => setActiveHoverId(null)}\n    >\n      <img\n        src={student.seniorPhotoUrl}\n        alt={student.seniorName}\n        className=\"object-cover w-full h-full\"\n        onError={(e) => {\n          (e.target as HTMLImageElement).src = '/placeholder-logo.png';\n        }}\n      />\n      <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2 text-center\">\n        <span className=\"text-white text-sm font-bold\">\n          {student.seniorName} {'->'} {student.collegeName}\n        </span>\n      </div>\n      <div\n        className=\"absolute top-1 right-1 text-xs font-bold text-white px-1.5 py-0.5 rounded\"\n        style={{ backgroundColor: GRAD_CLASS_COLORS[student.gradClass] }}\n      >\n        '{student.gradClass.replace(\"'\", '')}\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"flex flex-col h-full min-h-0\">\n      <div className=\"p-4 border-b border-gray-300 dark:border-neutral-800 bg-white dark:bg-neutral-900 sticky top-0 z-10\">\n        <h2 className=\"text-lg font-bold mb-2\">College List & Seniors</h2>\n        <div className=\"flex gap-2 mb-2\">\n          <input\n            type=\"text\"\n            placeholder=\"Search...\"\n            className=\"flex-1 px-2 py-1 border rounded text-sm dark:bg-neutral-800 dark:border-neutral-700\"\n            value={filterState.searchQuery}\n            onChange={handleSearch}\n          />\n          <button\n            onClick={() => setIsGallery(!isGallery)}\n            className=\"px-3 py-1 bg-gray-200 dark:bg-neutral-700 rounded text-sm\"\n          >\n            {isGallery ? 'List' : 'Gallery'}\n          </button>\n        </div>\n        <div className=\"text-xs text-gray-500\">Showing {filteredStudents.length} students</div>\n      </div>\n\n      <div\n        className=\"flex-1 min-h-0 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-400\"\n        style={{ scrollbarGutter: 'stable', maxHeight: 'calc(100vh - 240px)' }}\n      >\n        {filteredStudents.length === 0 ? (\n            <div className=\"p-8 text-center text-gray-500\">No results found.</div>\n        ) : (\n          groupedByGrad.map(([gradClass, students]) => {\n            const isCollapsed = collapsedClasses[gradClass] ?? false;\n            return (\n              <div key={gradClass} className=\"border-b border-gray-200 dark:border-neutral-800\">\n                <button\n                  className=\"w-full flex items-center justify-between px-4 py-2 bg-gray-100 dark:bg-neutral-800 text-left font-semibold\"\n                  onClick={() => toggleClass(gradClass)}\n                >\n                  <span className=\"flex items-center gap-2\">\n                    <span\n                      className=\"inline-block h-3 w-3 rounded-full\"\n                      style={{ backgroundColor: GRAD_CLASS_COLORS[gradClass] || '#ccc' }}\n                    />\n                    <span>{gradClass} Seniors</span>\n                    <span className=\"text-xs text-gray-500 ml-1\">({students.length})</span>\n                  </span>\n                  <span className=\"text-sm\">{isCollapsed ? '[+]' : '[-]'}</span>\n                </button>\n\n                {!isCollapsed && (\n                  <div className=\"p-2\">\n                    {isGallery ? (\n                      <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-3\">\n                        {students.map((s) => (\n                          <GalleryItem key={s.id} student={s} />\n                        ))}\n                      </div>\n                    ) : (\n                      <div className=\"divide-y divide-gray-200 dark:divide-neutral-800\">\n                        {students.map((s) => (\n                          <ListItem key={s.id} student={s} />\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            );\n          })\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 460, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kirk/Downloads/Coding%20Projects/collegemaptest/src/components/sidebar/FilterPanel.tsx"],"sourcesContent":["'use client';\n\nimport React, { useMemo } from 'react';\nimport { useFilters } from '@/contexts/FilterContext';\nimport { GRAD_CLASS_COLORS, PREDEFINED_MAJOR_AREAS } from '@/lib/constants';\nimport { useData } from '@/contexts/DataContext';\n\nconst REGION_OPTIONS = [\n  { key: 'InCityNYC', label: 'NYC', detail: 'NYC schools', icon: 'üóΩ' },\n  { key: 'InStateNYOther', label: 'NY State', detail: 'Outside NYC', icon: 'üß≠' },\n  { key: 'OutOfStateUS', label: 'Out-of-State US', detail: 'US outside NY', icon: '‚úàÔ∏è' },\n  { key: 'International', label: 'International', detail: 'Outside US', icon: 'üåç' },\n];\n\nconst MAJOR_COUNT_OVERRIDES: Record<string, number> = {\n  \"Arts/Design\": 24,\n  \"Business/Economics\": 53,\n  \"Communications\": 1,\n  \"Computer Science\": 5,\n  \"Education\": 3,\n  \"Engineering\": 37,\n  \"Health Sciences\": 26,\n  \"Humanities\": 10,\n  \"Humanities/Social Sciences\": 67,\n  \"IT\": 5,\n  \"Journalism\": 1,\n  \"Life Sciences\": 2,\n  \"Mathematics\": 2,\n  \"Physical Sciences\": 4,\n  \"Social Sciences\": 7,\n  \"Statistics\": 2,\n  \"STEM\": 68,\n  \"Other\": 0,\n  \"Undecided/Other\": 66,\n};\n\nexport default function FilterPanel() {\n  const { allStudents } = useData();\n  const { filterState, setFilterState, toggleGradClass, toggleMajorArea, toggleLocationFocus, toggleStateCountry } = useFilters();\n\n  const regionCounts = useMemo(() => {\n    const counts: Record<string, number> = {};\n    allStudents.forEach((s) => {\n      counts[s.locationFocus] = (counts[s.locationFocus] || 0) + 1;\n    });\n    return counts;\n  }, [allStudents]);\n\n  const majorCounts = useMemo(() => {\n    const counts: Record<string, number> = {};\n    allStudents.forEach((s) => {\n      const areas = s.majorArea.split(' & ').map((a) => a.trim());\n      areas.forEach((area) => {\n        counts[area] = (counts[area] || 0) + 1;\n      });\n    });\n    return counts;\n  }, [allStudents]);\n\n  const outOfStateCounts = useMemo(() => {\n    const counts: Record<string, number> = {};\n    allStudents.forEach((s) => {\n      if (s.stateOrCountry && s.stateOrCountry.length === 2 && s.stateOrCountry !== 'NY') {\n        counts[s.stateOrCountry] = (counts[s.stateOrCountry] || 0) + 1;\n      }\n    });\n    return Object.entries(counts)\n      .filter(([, count]) => count > 0)\n      .sort((a, b) => a[0].localeCompare(b[0]));\n  }, [allStudents]);\n\n  const setRegions = (keys: string[]) => {\n    const nextState: Record<string, boolean> = {};\n    REGION_OPTIONS.forEach(({ key }) => {\n      nextState[key] = keys.includes(key);\n    });\n    // Keep \"N/A\" untouched (hidden) if it exists\n    if (filterState.locationFocus['N/A'] !== undefined) {\n      nextState['N/A'] = filterState.locationFocus['N/A'];\n    }\n    setFilterState((prev) => ({ ...prev, locationFocus: nextState }));\n  };\n\n  return (\n    <div className=\"p-4 border-b border-gray-300 dark:border-neutral-800 space-y-4\">\n        {/* Grad Class Filter */}\n        <details open className=\"group\">\n            <summary className=\"font-bold cursor-pointer list-none flex justify-between\">\n                <span>Filter by Graduating Class</span>\n                <span className=\"group-open:rotate-180 transition-transform\">‚ñº</span>\n            </summary>\n            <div className=\"mt-2 space-y-1\">\n                {Object.keys(GRAD_CLASS_COLORS).map(cls => (\n                    <label key={cls} className=\"flex items-center space-x-2 text-sm cursor-pointer\">\n                        <input \n                            type=\"checkbox\" \n                            checked={!!filterState.gradClasses[cls]}\n                            onChange={() => toggleGradClass(cls)}\n                            className=\"rounded border-gray-300\"\n                        />\n                        <span className=\"w-3 h-3 inline-block rounded-full\" style={{ backgroundColor: GRAD_CLASS_COLORS[cls] }}></span>\n                        <span>{cls}</span>\n                    </label>\n                ))}\n            </div>\n        </details>\n\n        {/* Major Area Filter */}\n         <details className=\"group\">\n            <summary className=\"font-bold cursor-pointer list-none flex justify-between\">\n                <span>Filter by Major Area</span>\n                <span className=\"group-open:rotate-180 transition-transform\">‚ñº</span>\n            </summary>\n            <div className=\"mt-2 space-y-3\">\n              <div className=\"flex flex-wrap gap-2 text-xs\">\n                <button\n                  className=\"px-2 py-1 rounded border border-gray-300 dark:border-neutral-700 hover:bg-gray-100 dark:hover:bg-neutral-800\"\n                  onClick={() => {\n                    const next = PREDEFINED_MAJOR_AREAS.reduce((acc, a) => ({ ...acc, [a]: true }), {} as Record<string, boolean>);\n                    setFilterState((prev) => ({ ...prev, majorAreas: next }));\n                  }}\n                >\n                  Select All\n                </button>\n                <button\n                  className=\"px-2 py-1 rounded border border-gray-300 dark:border-neutral-700 hover:bg-gray-100 dark:hover:bg-neutral-800\"\n                  onClick={() => {\n                    const next = PREDEFINED_MAJOR_AREAS.reduce((acc, a) => ({ ...acc, [a]: false }), {} as Record<string, boolean>);\n                    setFilterState((prev) => ({ ...prev, majorAreas: next }));\n                  }}\n                >\n                  Clear All\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\n                {PREDEFINED_MAJOR_AREAS.filter((area) => (majorCounts[area] ?? MAJOR_COUNT_OVERRIDES[area] ?? 0) > 0).map((area) => {\n                  const checked = !!filterState.majorAreas[area];\n                  const displayCount = majorCounts[area] ?? MAJOR_COUNT_OVERRIDES[area] ?? 0;\n                  return (\n                    <label\n                      key={area}\n                      className={`flex items-center justify-between rounded border px-3 py-2 text-sm cursor-pointer transition-colors ${\n                        checked\n                          ? 'bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700'\n                          : 'bg-white dark:bg-neutral-900 border-gray-200 dark:border-neutral-800 hover:bg-gray-50 dark:hover:bg-neutral-800'\n                      }`}\n                      onClick={(e) => {\n                        e.preventDefault();\n                        toggleMajorArea(area);\n                      }}\n                      >\n                      <span className=\"flex flex-col\">\n                        <span className=\"font-semibold\">{area}</span>\n                        <span className=\"text-xs text-gray-500 dark:text-gray-400\">{displayCount} students</span>\n                      </span>\n                      <input\n                        type=\"checkbox\"\n                        readOnly\n                        checked={checked}\n                        className=\"w-4 h-4 rounded border-gray-300 dark:border-neutral-600 accent-green-600\"\n                      />\n                    </label>\n                  );\n                })}\n              </div>\n            </div>\n        </details>\n\n        {/* Location Focus */}\n         <details className=\"group\">\n            <summary className=\"font-bold cursor-pointer list-none flex justify-between\">\n                <span>Filter by Region</span>\n                <span className=\"group-open:rotate-180 transition-transform\">‚ñº</span>\n            </summary>\n            <div className=\"mt-2 space-y-3\">\n              <div className=\"flex flex-wrap gap-2 text-xs\">\n                <button\n                  className=\"px-2 py-1 rounded border border-gray-300 dark:border-neutral-700 hover:bg-gray-100 dark:hover:bg-neutral-800\"\n                  onClick={() => setRegions(REGION_OPTIONS.map((r) => r.key))}\n                >\n                  Select All\n                </button>\n                <button\n                  className=\"px-2 py-1 rounded border border-gray-300 dark:border-neutral-700 hover:bg-gray-100 dark:hover:bg-neutral-800\"\n                  onClick={() => setRegions(['InCityNYC'])}\n                >\n                  NYC Only\n                </button>\n                <button\n                  className=\"px-2 py-1 rounded border border-gray-300 dark:border-neutral-700 hover:bg-gray-100 dark:hover:bg-neutral-800\"\n                  onClick={() => setRegions(['InCityNYC', 'InStateNYOther'])}\n                >\n                  All NY\n                </button>\n                <button\n                  className=\"px-2 py-1 rounded border border-gray-300 dark:border-neutral-700 hover:bg-gray-100 dark:hover:bg-neutral-800\"\n                  onClick={() => setRegions(['OutOfStateUS', 'International'])}\n                >\n                  Beyond NY\n                </button>\n              </div>\n\n              <div className=\"space-y-2\">\n                {REGION_OPTIONS.map(({ key, label, detail, icon }) => {\n                  const checked = !!filterState.locationFocus[key];\n                  return (\n                    <label\n                      key={key}\n                      className={`flex items-center justify-between rounded border px-3 py-2 text-sm cursor-pointer transition-colors ${\n                        checked\n                          ? 'bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700'\n                          : 'bg-white dark:bg-neutral-900 border-gray-200 dark:border-neutral-800 hover:bg-gray-50 dark:hover:bg-neutral-800'\n                      }`}\n                      onClick={(e) => {\n                        e.preventDefault();\n                        toggleLocationFocus(key);\n                      }}\n                    >\n                      <span className=\"flex items-center gap-3\">\n                        <span className=\"text-lg\">{icon}</span>\n                        <span className=\"flex flex-col\">\n                          <span className=\"font-semibold\">{label}</span>\n                          <span className=\"text-xs text-gray-500 dark:text-gray-400\">{detail}</span>\n                        </span>\n                      </span>\n                      <span className=\"flex items-center gap-3\">\n                        <span className=\"text-xs text-gray-500 dark:text-gray-400\">({regionCounts[key] || 0})</span>\n                        <input\n                          type=\"checkbox\"\n                          readOnly\n                          checked={checked}\n                          className=\"w-4 h-4 rounded border-gray-300 dark:border-neutral-600 accent-blue-600\"\n                        />\n                      </span>\n                    </label>\n                  );\n                })}\n              </div>\n\n              {outOfStateCounts.length > 0 && (\n                <details className=\"group\">\n                  <summary className=\"font-semibold cursor-pointer list-none flex justify-between text-sm\">\n                    <span>Out-of-State breakdown</span>\n                    <span className=\"group-open:rotate-180 transition-transform\">‚ñº</span>\n                  </summary>\n                  <div className=\"mt-2 grid grid-cols-2 gap-2 text-sm\">\n                    {outOfStateCounts.map(([state, count]) => {\n                      const checked = filterState.stateCountry[state] ?? true;\n                      return (\n                        <label\n                          key={state}\n                          className={`flex items-center justify-between rounded border px-3 py-2 cursor-pointer transition-colors ${\n                            checked\n                              ? 'bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-700'\n                              : 'bg-white dark:bg-neutral-900 border-gray-200 dark:border-neutral-800 hover:bg-gray-50 dark:hover:bg-neutral-800'\n                          }`}\n                          onClick={(e) => {\n                            e.preventDefault();\n                            toggleStateCountry(state);\n                          }}\n                        >\n                          <span className=\"font-semibold\">{state}</span>\n                          <span className=\"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400\">\n                            ({count})\n                            <input\n                              type=\"checkbox\"\n                              readOnly\n                              checked={checked}\n                              className=\"w-4 h-4 rounded border-gray-300 dark:border-neutral-600 accent-purple-600\"\n                            />\n                          </span>\n                        </label>\n                      );\n                    })}\n                  </div>\n                </details>\n              )}\n            </div>\n        </details>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1088, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kirk/Downloads/Coding%20Projects/collegemaptest/src/components/sidebar/StatisticsPanel.tsx"],"sourcesContent":["'use client';\n\nimport React, { useMemo } from 'react';\nimport { useFilters } from '@/contexts/FilterContext';\nimport { useData } from '@/contexts/DataContext';\nimport { GRAD_CLASS_COLORS } from '@/lib/constants';\n\nexport default function StatisticsPanel() {\n  const { filteredStudents, filterState, toggleLocationFocus } = useFilters();\n  const { allStudents } = useData();\n\n  const regionStats = useMemo(() => {\n    const template = () => ({\n      Public: 0,\n      Private: 0,\n      Total: 0,\n      grads: {} as Record<string, number>,\n    });\n    const stats: Record<string, ReturnType<typeof template>> = {\n      InCityNYC: template(),\n      InStateNYOther: template(),\n      OutOfStateUS: template(),\n      International: template(),\n      Total: template(),\n    };\n\n    filteredStudents.forEach((student) => {\n      const focus = student.locationFocus;\n      if (!(focus in stats) || focus === 'N/A') return;\n      const bucket = stats[focus];\n      const type = student.isCampusPublic ? 'Public' : 'Private';\n      bucket[type] += 1;\n      bucket.Total += 1;\n      bucket.grads[student.gradClass] = (bucket.grads[student.gradClass] || 0) + 1;\n\n      const total = stats.Total;\n      total[type] += 1;\n      total.Total += 1;\n      total.grads[student.gradClass] = (total.grads[student.gradClass] || 0) + 1;\n    });\n\n    return stats;\n  }, [filteredStudents]);\n\n  const topColleges = useMemo(() => {\n    const counts: Record<string, number> = {};\n    filteredStudents.forEach((s) => {\n      counts[s.collegeName] = (counts[s.collegeName] || 0) + 1;\n    });\n    return Object.entries(counts)\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 5);\n  }, [filteredStudents]);\n\n  const totalStudents = allStudents.length;\n\n  return (\n    <div className=\"p-4 border-b border-gray-300 dark:border-neutral-800\">\n         <details className=\"group\">\n            <summary className=\"font-bold cursor-pointer list-none flex justify-between\">\n                <span>College Attendance Statistics</span>\n                <span className=\"group-open:rotate-180 transition-transform\">‚ñº</span>\n            </summary>\n            <div className=\"mt-3 space-y-3\">\n              {/* Region cards */}\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm\">\n                {[\n                  { key: \"InCityNYC\", label: \"In City (NYC)\" },\n                  { key: \"InStateNYOther\", label: \"In State (NY)\" },\n                  { key: \"OutOfStateUS\", label: \"Out of State\" },\n                  { key: \"International\", label: \"International\" }\n                ].map(({ key, label }) => {\n                  const region = regionStats[key];\n                  const percent = totalStudents ? Math.round((region.Total / totalStudents) * 100) : 0;\n                  return (\n                    <div\n                      key={key}\n                      className=\"rounded border border-gray-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3 shadow-sm flex flex-col gap-2\"\n                    >\n                      <div className=\"flex items-center justify-between\">\n                        <div>\n                          <div className=\"font-semibold\">{label}</div>\n                          <div className=\"text-xs text-gray-500 dark:text-gray-400\">{region.Total} students ‚Ä¢ {percent}%</div>\n                        </div>\n                        <label className=\"flex items-center gap-2 text-xs\">\n                          <input\n                            type=\"checkbox\"\n                            checked={!!filterState.locationFocus[key]}\n                            onChange={() => toggleLocationFocus(key)}\n                          />\n                          <span>Show</span>\n                        </label>\n                      </div>\n                      <div className=\"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-300\">\n                        <span className=\"px-2 py-0.5 rounded bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-200\">Public: {region.Public}</span>\n                        <span className=\"px-2 py-0.5 rounded bg-amber-100 text-amber-800 dark:bg-amber-900/40 dark:text-amber-200\">Private: {region.Private}</span>\n                      </div>\n                      {Object.keys(region.grads).length > 0 && (\n                        <div className=\"flex flex-wrap gap-2 text-xs\">\n                          {Object.entries(region.grads).sort().map(([grad, count]) => (\n                            <span\n                              key={grad}\n                              className=\"px-2 py-0.5 rounded text-white font-semibold\"\n                              style={{ backgroundColor: GRAD_CLASS_COLORS[grad] || '#666' }}\n                            >\n                              {grad}: {count}\n                            </span>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n\n              {/* Top colleges */}\n              <div className=\"rounded border border-gray-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-3 shadow-sm\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <div className=\"font-semibold text-sm\">Top Colleges (Filtered)</div>\n                  <div className=\"text-xs text-gray-500 dark:text-gray-400\">{filteredStudents.length} students</div>\n                </div>\n                {topColleges.length === 0 ? (\n                  <div className=\"text-xs text-gray-500\">No colleges in current filters.</div>\n                ) : (\n                  <ul className=\"text-xs space-y-1\">\n                    {topColleges.map(([college, count], idx) => (\n                      <li key={college} className=\"flex justify-between\">\n                        <span>{idx + 1}. {college}</span>\n                        <span className=\"font-semibold\">{count}</span>\n                      </li>\n                    ))}\n                  </ul>\n                )}\n              </div>\n            </div>\n        </details>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1433, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kirk/Downloads/Coding%20Projects/collegemaptest/src/components/sidebar/TrendCharts.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n  ChartOptions\n} from 'chart.js';\nimport { Line } from 'react-chartjs-2';\nimport { useData } from '@/contexts/DataContext';\nimport { useTheme } from '@/contexts/ThemeContext';\nimport { PREDEFINED_MAJOR_AREAS } from '@/lib/constants';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\nexport default function TrendCharts() {\n  const { allStudents } = useData();\n  const { theme } = useTheme();\n  const isDark = theme === 'dark';\n\n  const years = [\"'21\", \"'22\", \"'23\", \"'24\", \"'25\", \"'26\"];\n  const palette = [\n    '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40',\n    '#8A2BE2', '#5F9EA0', '#D2691E', '#FF7F50', '#6495ED', '#20c997',\n    '#f472b6', '#f59e0b', '#22c55e', '#6366f1', '#06b6d4'\n  ];\n\n  const totalsByYear = React.useMemo(() => {\n    const map: Record<string, number> = {};\n    years.forEach((y) => { map[y] = 0; });\n    allStudents.forEach((s) => {\n      if (map[s.gradClass] !== undefined) map[s.gradClass] += 1;\n    });\n    return map;\n  }, [allStudents, years]);\n\n  const majorDatasets = PREDEFINED_MAJOR_AREAS.map((area, idx) => {\n    const data = years.map(year => {\n      const total = totalsByYear[year] || 0;\n      if (!total) return 0;\n      const count = allStudents.filter(s => s.gradClass === year && s.majorArea === area).length;\n      return (count / total) * 100;\n    });\n\n    return {\n      label: area,\n      data,\n      borderColor: palette[idx % palette.length],\n      backgroundColor: palette[idx % palette.length],\n      tension: 0.3,\n      hidden: idx > 4 // reduce clutter by default\n    };\n  });\n\n  const locationKeys = [\n    { key: 'InCityNYC', label: 'NYC' },\n    { key: 'InStateNYOther', label: 'Rest of NY' },\n    { key: 'OutOfStateUS', label: 'Out of State' },\n    { key: 'International', label: 'International' },\n  ];\n\n  const locationDatasets = locationKeys.map((loc, idx) => {\n    const data = years.map(year => {\n      const total = totalsByYear[year] || 0;\n      if (!total) return 0;\n      const count = allStudents.filter(s => s.gradClass === year && s.locationFocus === loc.key).length;\n      return (count / total) * 100;\n    });\n    return {\n      label: loc.label,\n      data,\n      borderColor: palette[(idx + 5) % palette.length],\n      backgroundColor: palette[(idx + 5) % palette.length],\n      tension: 0.3,\n    };\n  });\n\n  const topFiveColleges = React.useMemo(() => {\n    const counts: Record<string, number> = {};\n    allStudents.forEach((s) => {\n      if (!s.collegeName || s.collegeName === 'Undecided') return;\n      counts[s.collegeName] = (counts[s.collegeName] || 0) + 1;\n    });\n    return Object.entries(counts)\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 5)\n      .map(([name]) => name);\n  }, [allStudents]);\n\n  const collegeDatasets = topFiveColleges.map((college, idx) => {\n    const data = years.map(year => {\n      const total = totalsByYear[year] || 0;\n      if (!total) return 0;\n      const count = allStudents.filter(s => s.gradClass === year && s.collegeName === college).length;\n      return (count / total) * 100;\n    });\n    return {\n      label: college,\n      data,\n      borderColor: palette[(idx + 9) % palette.length],\n      backgroundColor: palette[(idx + 9) % palette.length],\n      tension: 0.3,\n    };\n  });\n\n  const options: ChartOptions<'line'> = {\n    responsive: true,\n    maintainAspectRatio: false,\n    interaction: {\n      mode: 'index' as const,\n      intersect: false,\n    },\n    plugins: {\n      legend: {\n        position: 'top' as const,\n        labels: {\n            color: isDark ? '#e5e5e5' : '#333',\n            boxWidth: 10,\n            font: { size: 10 }\n        }\n      },\n      title: {\n        display: false,\n      },\n      tooltip: {\n          callbacks: {\n              label: (ctx) => {\n                const value = typeof ctx.parsed?.y === 'number' ? ctx.parsed.y : 0;\n                return `${ctx.dataset.label}: ${value.toFixed(1)}%`;\n              }\n          }\n      }\n    },\n    scales: {\n        x: {\n            grid: { color: isDark ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)' },\n            ticks: { color: isDark ? '#ccc' : '#666' }\n        },\n        y: {\n            grid: { color: isDark ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)' },\n            ticks: { color: isDark ? '#ccc' : '#666', callback: (v) => `${v}%` },\n            min: 0,\n            max: 100\n        }\n    }\n  };\n\n  return (\n    <div className=\"p-4 border-b border-gray-300 dark:border-neutral-800 space-y-4\">\n      <details className=\"group\">\n        <summary className=\"font-bold cursor-pointer list-none flex justify-between\">\n          <span>Data Trends Over Time</span>\n          <span className=\"group-open:rotate-180 transition-transform\">‚ñº</span>\n        </summary>\n        <div className=\"mt-4 space-y-6\">\n          <div className=\"h-64\">\n            <h5 className=\"text-xs font-bold text-center mb-2 dark:text-gray-300\">Major Area Popularity (% of Grads/Year)</h5>\n            <div className=\"h-full pb-6\">\n              <Line options={options} data={{ labels: years, datasets: majorDatasets }} />\n            </div>\n          </div>\n\n          <div className=\"h-64\">\n            <h5 className=\"text-xs font-bold text-center mb-2 dark:text-gray-300\">Location Focus (% of Grads/Year)</h5>\n            <div className=\"h-full pb-6\">\n              <Line options={options} data={{ labels: years, datasets: locationDatasets }} />\n            </div>\n          </div>\n\n          <div className=\"h-64\">\n            <h5 className=\"text-xs font-bold text-center mb-2 dark:text-gray-300\">Top 5 Colleges by Attendance (% of Grads/Year)</h5>\n            <div className=\"h-full pb-6\">\n              <Line options={options} data={{ labels: years, datasets: collegeDatasets }} />\n            </div>\n          </div>\n        </div>\n      </details>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAWA;AACA;AACA;AACA;AAjBA;;;;;;;;AAmBA,qKAAO,CAAC,QAAQ,CACd,6KAAa,EACb,2KAAW,EACX,4KAAY,EACZ,2KAAW,EACX,qKAAK,EACL,uKAAO,EACP,sKAAM;AAGO,SAAS;IACtB,MAAM,EAAE,WAAW,EAAE,GAAG,IAAA,0IAAO;IAC/B,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,4IAAQ;IAC1B,MAAM,SAAS,UAAU;IAEzB,MAAM,QAAQ;QAAC;QAAO;QAAO;QAAO;QAAO;QAAO;KAAM;IACxD,MAAM,UAAU;QACd;QAAW;QAAW;QAAW;QAAW;QAAW;QACvD;QAAW;QAAW;QAAW;QAAW;QAAW;QACvD;QAAW;QAAW;QAAW;QAAW;KAC7C;IAED,MAAM,eAAe,gNAAK,CAAC,OAAO,CAAC;QACjC,MAAM,MAA8B,CAAC;QACrC,MAAM,OAAO,CAAC,CAAC;YAAQ,GAAG,CAAC,EAAE,GAAG;QAAG;QACnC,YAAY,OAAO,CAAC,CAAC;YACnB,IAAI,GAAG,CAAC,EAAE,SAAS,CAAC,KAAK,WAAW,GAAG,CAAC,EAAE,SAAS,CAAC,IAAI;QAC1D;QACA,OAAO;IACT,GAAG;QAAC;QAAa;KAAM;IAEvB,MAAM,gBAAgB,iJAAsB,CAAC,GAAG,CAAC,CAAC,MAAM;QACtD,MAAM,OAAO,MAAM,GAAG,CAAC,CAAA;YACrB,MAAM,QAAQ,YAAY,CAAC,KAAK,IAAI;YACpC,IAAI,CAAC,OAAO,OAAO;YACnB,MAAM,QAAQ,YAAY,MAAM,CAAC,CAAA,IAAK,EAAE,SAAS,KAAK,QAAQ,EAAE,SAAS,KAAK,MAAM,MAAM;YAC1F,OAAO,AAAC,QAAQ,QAAS;QAC3B;QAEA,OAAO;YACL,OAAO;YACP;YACA,aAAa,OAAO,CAAC,MAAM,QAAQ,MAAM,CAAC;YAC1C,iBAAiB,OAAO,CAAC,MAAM,QAAQ,MAAM,CAAC;YAC9C,SAAS;YACT,QAAQ,MAAM,EAAE,4BAA4B;QAC9C;IACF;IAEA,MAAM,eAAe;QACnB;YAAE,KAAK;YAAa,OAAO;QAAM;QACjC;YAAE,KAAK;YAAkB,OAAO;QAAa;QAC7C;YAAE,KAAK;YAAgB,OAAO;QAAe;QAC7C;YAAE,KAAK;YAAiB,OAAO;QAAgB;KAChD;IAED,MAAM,mBAAmB,aAAa,GAAG,CAAC,CAAC,KAAK;QAC9C,MAAM,OAAO,MAAM,GAAG,CAAC,CAAA;YACrB,MAAM,QAAQ,YAAY,CAAC,KAAK,IAAI;YACpC,IAAI,CAAC,OAAO,OAAO;YACnB,MAAM,QAAQ,YAAY,MAAM,CAAC,CAAA,IAAK,EAAE,SAAS,KAAK,QAAQ,EAAE,aAAa,KAAK,IAAI,GAAG,EAAE,MAAM;YACjG,OAAO,AAAC,QAAQ,QAAS;QAC3B;QACA,OAAO;YACL,OAAO,IAAI,KAAK;YAChB;YACA,aAAa,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,QAAQ,MAAM,CAAC;YAChD,iBAAiB,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,QAAQ,MAAM,CAAC;YACpD,SAAS;QACX;IACF;IAEA,MAAM,kBAAkB,gNAAK,CAAC,OAAO,CAAC;QACpC,MAAM,SAAiC,CAAC;QACxC,YAAY,OAAO,CAAC,CAAC;YACnB,IAAI,CAAC,EAAE,WAAW,IAAI,EAAE,WAAW,KAAK,aAAa;YACrD,MAAM,CAAC,EAAE,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,WAAW,CAAC,IAAI,CAAC,IAAI;QACzD;QACA,OAAO,OAAO,OAAO,CAAC,QACnB,IAAI,CAAC,CAAC,GAAG,IAAM,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAC1B,KAAK,CAAC,GAAG,GACT,GAAG,CAAC,CAAC,CAAC,KAAK,GAAK;IACrB,GAAG;QAAC;KAAY;IAEhB,MAAM,kBAAkB,gBAAgB,GAAG,CAAC,CAAC,SAAS;QACpD,MAAM,OAAO,MAAM,GAAG,CAAC,CAAA;YACrB,MAAM,QAAQ,YAAY,CAAC,KAAK,IAAI;YACpC,IAAI,CAAC,OAAO,OAAO;YACnB,MAAM,QAAQ,YAAY,MAAM,CAAC,CAAA,IAAK,EAAE,SAAS,KAAK,QAAQ,EAAE,WAAW,KAAK,SAAS,MAAM;YAC/F,OAAO,AAAC,QAAQ,QAAS;QAC3B;QACA,OAAO;YACL,OAAO;YACP;YACA,aAAa,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,QAAQ,MAAM,CAAC;YAChD,iBAAiB,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,QAAQ,MAAM,CAAC;YACpD,SAAS;QACX;IACF;IAEA,MAAM,UAAgC;QACpC,YAAY;QACZ,qBAAqB;QACrB,aAAa;YACX,MAAM;YACN,WAAW;QACb;QACA,SAAS;YACP,QAAQ;gBACN,UAAU;gBACV,QAAQ;oBACJ,OAAO,SAAS,YAAY;oBAC5B,UAAU;oBACV,MAAM;wBAAE,MAAM;oBAAG;gBACrB;YACF;YACA,OAAO;gBACL,SAAS;YACX;YACA,SAAS;gBACL,WAAW;oBACP,OAAO,CAAC;wBACN,MAAM,QAAQ,OAAO,IAAI,MAAM,EAAE,MAAM,WAAW,IAAI,MAAM,CAAC,CAAC,GAAG;wBACjE,OAAO,GAAG,IAAI,OAAO,CAAC,KAAK,CAAC,EAAE,EAAE,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC;oBACrD;gBACJ;YACJ;QACF;QACA,QAAQ;YACJ,GAAG;gBACC,MAAM;oBAAE,OAAO,SAAS,0BAA0B;gBAAkB;gBACpE,OAAO;oBAAE,OAAO,SAAS,SAAS;gBAAO;YAC7C;YACA,GAAG;gBACC,MAAM;oBAAE,OAAO,SAAS,0BAA0B;gBAAkB;gBACpE,OAAO;oBAAE,OAAO,SAAS,SAAS;oBAAQ,UAAU,CAAC,IAAM,GAAG,EAAE,CAAC,CAAC;gBAAC;gBACnE,KAAK;gBACL,KAAK;YACT;QACJ;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAQ,WAAU;;8BACjB,8OAAC;oBAAQ,WAAU;;sCACjB,8OAAC;sCAAK;;;;;;sCACN,8OAAC;4BAAK,WAAU;sCAA6C;;;;;;;;;;;;8BAE/D,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAAwD;;;;;;8CACtE,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,8JAAI;wCAAC,SAAS;wCAAS,MAAM;4CAAE,QAAQ;4CAAO,UAAU;wCAAc;;;;;;;;;;;;;;;;;sCAI3E,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAAwD;;;;;;8CACtE,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,8JAAI;wCAAC,SAAS;wCAAS,MAAM;4CAAE,QAAQ;4CAAO,UAAU;wCAAiB;;;;;;;;;;;;;;;;;sCAI9E,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAAwD;;;;;;8CACtE,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,8JAAI;wCAAC,SAAS;wCAAS,MAAM;4CAAE,QAAQ;4CAAO,UAAU;wCAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOvF"}},
    {"offset": {"line": 1782, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kirk/Downloads/Coding%20Projects/collegemaptest/src/components/map/MapMarkers.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { useMap } from '@vis.gl/react-google-maps';\nimport { MarkerClusterer } from '@googlemaps/markerclusterer';\nimport { ProcessedStudent } from '@/lib/types';\nimport { GRAD_CLASS_COLORS } from '@/lib/constants';\nimport { useTheme } from '@/contexts/ThemeContext';\nimport { useUI } from '@/contexts/UIContext';\n\ndeclare var google: any;\n\ninterface MapMarkersProps {\n  students: ProcessedStudent[];\n}\n\nexport default function MapMarkers({ students }: MapMarkersProps) {\n  const map = useMap();\n  const { theme } = useTheme();\n  const { openPhotoPopup, activeHoverId, setActiveHoverId } = useUI();\n  const clustererRef = useRef<MarkerClusterer | null>(null);\n  const markersRef = useRef<{[key: number]: { marker: any; color: string } }>({});\n  const infowindowRef = useRef<any | null>(null);\n  const lastHighlightedRef = useRef<number | null>(null);\n\n  const buildIcon = (color: string, scale = 7, strokeWeight = 1.5) => ({\n    path: google.maps.SymbolPath.CIRCLE,\n    fillColor: color,\n    fillOpacity: 1,\n    strokeColor: theme === 'dark' ? '#111' : '#fff',\n    strokeWeight,\n    scale,\n  });\n\n  // Cleanup markers on unmount\n  useEffect(() => {\n    return () => {\n      if (clustererRef.current) {\n        clustererRef.current.clearMarkers();\n      }\n    };\n  }, []);\n\n  // Initialize info window once\n  useEffect(() => {\n     if (typeof google === 'undefined') return;\n     if (!infowindowRef.current) {\n         infowindowRef.current = new google.maps.InfoWindow();\n     }\n  }, []);\n\n  // Effect to handle marker highlighting from list hover\n  useEffect(() => {\n    if (typeof google === 'undefined') return;\n\n    // remove previous highlight\n    if (lastHighlightedRef.current !== null) {\n      const previous = markersRef.current[lastHighlightedRef.current];\n      if (previous) {\n        previous.marker.setIcon(buildIcon(previous.color));\n      }\n    }\n\n    // apply new highlight\n    if (activeHoverId !== null) {\n      const current = markersRef.current[activeHoverId];\n      if (current) {\n        current.marker.setIcon(buildIcon(current.color, 9, 2));\n        lastHighlightedRef.current = activeHoverId;\n        return;\n      }\n    }\n\n    lastHighlightedRef.current = null;\n  }, [activeHoverId, theme]);\n\n  useEffect(() => {\n    if (!map) return;\n    \n    if (!clustererRef.current) {\n      clustererRef.current = new MarkerClusterer({ \n          map,\n          renderer: {\n            render: ({ count, position }) => {\n                let color = \"red\";\n                let diameter = 50;\n                let labelColor = \"white\";\n\n                if (count <= 5) { color = \"green\"; diameter = 30; }\n                else if (count <= 10) { color = \"#90EE90\"; diameter = 35; labelColor = \"black\"; }\n                else if (count <= 20) { color = \"yellow\"; diameter = 40; labelColor = \"black\"; }\n                else if (count <= 50) { color = \"orange\"; diameter = 45; }\n\n                const svg = window.btoa(`\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${diameter}\" height=\"${diameter}\" viewBox=\"0 0 ${diameter} ${diameter}\">\n                    <circle cx=\"${diameter / 2}\" cy=\"${diameter / 2}\" r=\"${diameter / 2 * 0.9}\" fill=\"${color}\" stroke=\"rgba(0,0,0,0.3)\" stroke-width=\"${Math.max(1, diameter * 0.04)}\"/>\n                </svg>`);\n\n                return new google.maps.Marker({\n                    position,\n                    icon: {\n                        url: `data:image/svg+xml;base64,${svg}`,\n                        scaledSize: new google.maps.Size(diameter, diameter),\n                        anchor: new google.maps.Point(diameter / 2, diameter / 2)\n                    },\n                    label: {\n                        text: String(count),\n                        color: labelColor,\n                        fontSize: '12px',\n                        fontWeight: 'bold',\n                    },\n                    zIndex: 100 + count,\n                });\n            }\n          }\n      });\n    }\n\n    clustererRef.current.clearMarkers();\n    markersRef.current = {};\n    lastHighlightedRef.current = null;\n\n    const newMarkers: any[] = [];\n\n    const openStudentInfo = (student: ProcessedStudent, marker: any) => {\n      if (infowindowRef.current) {\n        const content = `\n          <div style=\"color: black; padding: 4px;\">\n              <div style=\"font-weight: bold; font-size: 14px;\">${student.seniorName} (${student.gradClass})</div>\n              <div style=\"color: #2563eb; margin-bottom: 4px;\">${student.collegeName}</div>\n              <div style=\"font-size: 12px; color: #666;\">${student.major || 'Undecided'}</div>\n              ${student.collegeImageUrl ? `<img src=\"${student.collegeImageUrl}\" style=\"max-height:50px; margin-top:8px; display:block;\" />` : ''}\n          </div>\n        `;\n        infowindowRef.current.setContent(content);\n        infowindowRef.current.open(map, marker);\n      }\n    };\n\n    students.forEach((student) => {\n        if (student.lat === 0 && student.lng === 0) return;\n        if (student.collegeName === \"Undecided\") return; \n\n        const color = GRAD_CLASS_COLORS[student.gradClass] || \"#cccccc\";\n        \n        const marker = new google.maps.Marker({\n            position: { lat: student.lat, lng: student.lng },\n            title: `${student.seniorName} -> ${student.collegeName}`,\n            icon: buildIcon(color)\n        });\n\n        marker.addListener(\"click\", () => {\n             // Open InfoWindow\n             openStudentInfo(student, marker);\n             // Also trigger global selection for popup/sidebar sync\n             openPhotoPopup(student);\n        });\n\n        marker.addListener(\"mouseover\", () => {\n           setActiveHoverId(student.id);\n        });\n\n        marker.addListener(\"mouseout\", () => {\n           setActiveHoverId(null);\n        });\n\n        newMarkers.push(marker);\n        markersRef.current[student.id] = { marker, color };\n    });\n\n    clustererRef.current.addMarkers(newMarkers);\n\n    const handleCenterEvent = (e: CustomEvent<{ id: number }>) => {\n      const target = markersRef.current[e.detail.id];\n      if (target && map) {\n        map.panTo(target.marker.getPosition());\n        map.setZoom(Math.max(map.getZoom() ?? 7, 12));\n        openStudentInfo(students.find((s) => s.id === e.detail.id)!, target.marker);\n        setActiveHoverId(e.detail.id);\n      }\n    };\n\n    window.addEventListener('center-student-marker', handleCenterEvent as EventListener);\n    return () => {\n      window.removeEventListener('center-student-marker', handleCenterEvent as EventListener);\n    };\n\n  }, [map, students, theme, openPhotoPopup, setActiveHoverId]);\n\n  return null;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1976, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kirk/Downloads/Coding%20Projects/collegemaptest/src/components/map/MapControls.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useMap } from '@vis.gl/react-google-maps';\nimport { useTheme } from '@/contexts/ThemeContext';\nimport { useFilters } from '@/contexts/FilterContext';\n\ndeclare var google: any;\n\nconst HOME_COORDS = { lat: 40.720735, lng: -73.983154 }; // NEST+m approx\n\nexport function MapControls() {\n  const map = useMap();\n  const { toggleTheme, theme } = useTheme();\n  const { resetFilters } = useFilters();\n  const [transitLayer, setTransitLayer] = React.useState<any | null>(null);\n  const [mapType, setMapType] = React.useState<'roadmap' | 'satellite'>('roadmap');\n  const [showNestm, setShowNestm] = React.useState<boolean>(() => {\n    if (typeof window === 'undefined') return true;\n    const stored = window.localStorage.getItem('show-nestm');\n    return stored === 'false' ? false : true;\n  });\n  const homeMarkerRef = React.useRef<any | null>(null);\n\n  React.useEffect(() => {\n    if (typeof window === 'undefined') return;\n    const stored = window.localStorage.getItem('map-type');\n    if (stored === 'satellite' || stored === 'roadmap') {\n      setMapType(stored);\n      if (map) map.setMapTypeId(stored);\n    }\n    const storedTransit = window.localStorage.getItem('transit-visible');\n    if (storedTransit === 'true' && map && !transitLayer) {\n      const layer = new google.maps.TransitLayer();\n      layer.setMap(map);\n      setTransitLayer(layer);\n    }\n  }, [map]); \n\n  // Home marker toggle/persist\n  React.useEffect(() => {\n    if (!map) return;\n    if (showNestm) {\n      const marker = new google.maps.Marker({\n        position: HOME_COORDS,\n        map,\n        title: 'NEST+m',\n        icon: {\n          path: google.maps.SymbolPath.CIRCLE,\n          scale: 8,\n          fillColor: '#8b5cf6',\n          fillOpacity: 1,\n          strokeColor: '#fff',\n          strokeWeight: 2,\n        },\n        zIndex: 9999,\n      });\n      homeMarkerRef.current = marker;\n      if (typeof window !== 'undefined') window.localStorage.setItem('show-nestm', 'true');\n    } else {\n      if (homeMarkerRef.current) {\n        homeMarkerRef.current.setMap(null);\n        homeMarkerRef.current = null;\n      }\n      if (typeof window !== 'undefined') window.localStorage.setItem('show-nestm', 'false');\n    }\n    return () => {\n      if (homeMarkerRef.current) {\n        homeMarkerRef.current.setMap(null);\n        homeMarkerRef.current = null;\n      }\n    };\n  }, [showNestm, map]);\n\n  const handleToggleTransit = () => {\n    if (!map) return;\n    if (transitLayer) {\n        transitLayer.setMap(null);\n        setTransitLayer(null);\n        if (typeof window !== 'undefined') window.localStorage.setItem('transit-visible', 'false');\n    } else {\n        const layer = new google.maps.TransitLayer();\n        layer.setMap(map);\n        setTransitLayer(layer);\n        if (typeof window !== 'undefined') window.localStorage.setItem('transit-visible', 'true');\n    }\n  };\n\n  const toggleMapType = () => {\n    if (!map) return;\n    const next = mapType === 'roadmap' ? 'satellite' : 'roadmap';\n    map.setMapTypeId(next);\n    setMapType(next);\n    if (typeof window !== 'undefined') {\n      window.localStorage.setItem('map-type', next);\n    }\n  };\n\n  const handleZoomVisible = () => {\n      // In a real implementation, calculate bounds of filteredStudents and map.fitBounds(bounds)\n      if(!map) return;\n      map.setZoom(7);\n      map.setCenter({ lat: 41.8, lng: -74.5 });\n  };\n\n  const handleZoomHome = () => {\n    if (!map) return;\n    map.setCenter(HOME_COORDS);\n    map.setZoom(15);\n  };\n\n  return (\n    <>\n    <div\n      id=\"map-controls-bar\"\n      className=\"absolute top-2 right-4 flex flex-wrap gap-2 max-w-[calc(100%-120px)] justify-end pointer-events-none\"\n      style={{ transform: 'translateX(0px)' }}\n    >\n        <div className=\"bg-white/90 dark:bg-neutral-800/90 p-2 rounded shadow flex flex-wrap gap-2 pointer-events-auto backdrop-blur-sm border border-gray-200 dark:border-neutral-700\">\n          <button\n            onClick={toggleTheme}\n            className=\"px-3 py-1 bg-gray-100 dark:bg-neutral-700 rounded hover:bg-gray-200 text-sm\"\n          >\n            {theme === 'dark' ? '‚òÄÔ∏è Light' : 'üåô Dark'}\n          </button>\n          <button\n            onClick={toggleMapType}\n            className=\"px-3 py-1 bg-gray-100 dark:bg-neutral-700 rounded hover:bg-gray-200 text-sm\"\n          >\n            {mapType === 'satellite' ? 'üó∫Ô∏è Map' : 'üõ∞Ô∏è Satellite'}\n          </button>\n          <button\n            onClick={handleToggleTransit}\n            className=\"px-3 py-1 bg-gray-100 dark:bg-neutral-700 rounded hover:bg-gray-200 text-sm\"\n          >\n            {transitLayer ? 'üöá Hide Transit' : 'üöá Transit'}\n          </button>\n          <button\n            onClick={handleZoomHome}\n            className=\"px-3 py-1 bg-gray-100 dark:bg-neutral-700 rounded hover:bg-gray-200 text-sm\"\n          >\n            üè´ NEST+m\n          </button>\n          <button\n            onClick={handleZoomVisible}\n            className=\"px-3 py-1 bg-gray-100 dark:bg-neutral-700 rounded hover:bg-gray-200 text-sm\"\n          >\n            üëÅÔ∏è Reset View\n          </button>\n          <button\n            onClick={() => window.dispatchEvent(new CustomEvent('open-update-log'))}\n            className=\"px-3 py-1 bg-gray-100 dark:bg-neutral-700 rounded hover:bg-gray-200 text-sm\"\n          >\n            üìù Update Log\n          </button>\n          <button\n            onClick={() => window.dispatchEvent(new CustomEvent('open-faq'))}\n            className=\"px-3 py-1 bg-gray-100 dark:bg-neutral-700 rounded hover:bg-gray-200 text-sm\"\n          >\n            ‚ùì FAQ\n          </button>\n          <button\n            onClick={() => setShowNestm((v) => !v)}\n            className=\"px-3 py-1 bg-gray-100 dark:bg-neutral-700 rounded hover:bg-gray-200 text-sm\"\n            aria-pressed={showNestm}\n          >\n            {showNestm ? 'üëÅÔ∏è Hide NEST+m' : 'üëÄ Show NEST+m'}\n          </button>\n          <button\n            onClick={resetFilters}\n            className=\"px-3 py-1 bg-gray-100 dark:bg-neutral-700 rounded hover:bg-gray-200 text-sm\"\n          >\n            üßπ Clear Filters\n          </button>\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2202, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kirk/Downloads/Coding%20Projects/collegemaptest/src/components/map/CollegeMap.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect } from 'react';\nimport { APIProvider, Map, useMap } from '@vis.gl/react-google-maps';\nimport { useTheme } from '@/contexts/ThemeContext';\nimport { useFilters } from '@/contexts/FilterContext';\nimport { MAP_STYLE_DARK } from '@/lib/constants';\nimport MapMarkers from './MapMarkers';\nimport { MapControls } from './MapControls';\n\nconst DEFAULT_CENTER = { lat: 41.8, lng: -74.5 };\nconst DEFAULT_ZOOM = 7;\n\n// Sync map styling with theme without recreating the map instance\nfunction MapStyleSync({ theme }: { theme: 'light' | 'dark' }) {\n  const map = useMap();\n\n  useEffect(() => {\n    if (!map) return;\n    const styles = theme === 'dark' ? MAP_STYLE_DARK : [];\n    map.setOptions({ styles });\n  }, [map, theme]);\n\n  return null;\n}\n\nexport default function CollegeMap() {\n  const { theme } = useTheme();\n  const { filteredStudents } = useFilters();\n  const [mapType, setMapType] = React.useState<'roadmap' | 'satellite'>('roadmap');\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n    const stored = window.localStorage.getItem('map-type');\n    if (stored === 'satellite' || stored === 'roadmap') {\n      setMapType(stored);\n    }\n  }, []);\n\n  // Persist map type\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      window.localStorage.setItem('map-type', mapType);\n    }\n  }, [mapType]);\n  \n  return (\n    <div className=\"relative w-full h-full bg-gray-200 dark:bg-neutral-800\">\n      <APIProvider apiKey={process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY || ''}>\n        <Map\n          defaultCenter={DEFAULT_CENTER}\n          defaultZoom={DEFAULT_ZOOM}\n          gestureHandling={'greedy'}\n          disableDefaultUI={false}\n          fullscreenControl={false} // We have custom controls or layout handles this\n          defaultMapTypeId={mapType}\n          onMapTypeIdChanged={(e) => {\n            const newType = (e as any)?.mapTypeId || mapType;\n            if (newType === 'satellite' || newType === 'roadmap') setMapType(newType);\n          }}\n          className=\"w-full h-full\"\n        >\n            <MapStyleSync theme={theme} />\n            <MapMarkers students={filteredStudents} />\n            <MapControls />\n        </Map>\n      </APIProvider>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAUA,MAAM,iBAAiB;IAAE,KAAK;IAAM,KAAK,CAAC;AAAK;AAC/C,MAAM,eAAe;AAErB,kEAAkE;AAClE,SAAS,aAAa,EAAE,KAAK,EAA+B;IAC1D,MAAM,MAAM,IAAA,4LAAM;IAElB,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,KAAK;QACV,MAAM,SAAS,UAAU,SAAS,yIAAc,GAAG,EAAE;QACrD,IAAI,UAAU,CAAC;YAAE;QAAO;IAC1B,GAAG;QAAC;QAAK;KAAM;IAEf,OAAO;AACT;AAEe,SAAS;IACtB,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,4IAAQ;IAC1B,MAAM,EAAE,gBAAgB,EAAE,GAAG,IAAA,+IAAU;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,gNAAK,CAAC,QAAQ,CAA0B;IAEtE,IAAA,kNAAS,EAAC;QACR,wCAAmC;;;QACnC,MAAM;IAIR,GAAG,EAAE;IAEL,mBAAmB;IACnB,IAAA,kNAAS,EAAC;QACR;;IAGF,GAAG;QAAC;KAAQ;IAEZ,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,iMAAW;YAAC,QAAQ,+EAA+C;sBAClE,cAAA,8OAAC,yLAAG;gBACF,eAAe;gBACf,aAAa;gBACb,iBAAiB;gBACjB,kBAAkB;gBAClB,mBAAmB;gBACnB,kBAAkB;gBAClB,oBAAoB,CAAC;oBACnB,MAAM,UAAU,AAAC,GAAW,aAAa;oBACzC,IAAI,YAAY,eAAe,YAAY,WAAW,WAAW;gBACnE;gBACA,WAAU;;kCAER,8OAAC;wBAAa,OAAO;;;;;;kCACrB,8OAAC,kJAAU;wBAAC,UAAU;;;;;;kCACtB,8OAAC,uJAAW;;;;;;;;;;;;;;;;;;;;;AAKxB"}},
    {"offset": {"line": 2317, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kirk/Downloads/Coding%20Projects/collegemaptest/src/components/ui/PhotoPopup.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { PopupAnchorRect, useUI } from '@/contexts/UIContext';\nimport { X, ChevronLeft, ChevronRight } from 'lucide-react';\nimport { createPortal } from 'react-dom';\nimport { useFilters } from '@/contexts/FilterContext';\nimport { GRAD_CLASS_COLORS } from '@/lib/constants';\n\nexport default function PhotoPopup() {\n  const { selectedStudent, isPhotoPopupOpen, closePhotoPopup, openPhotoPopup, popupAnchorRect } = useUI();\n  const { filteredStudents } = useFilters();\n  const [isZoomed, setIsZoomed] = useState(false);\n  const wasOpenRef = useRef(false);\n\n  const captionText = useMemo(() => {\n    if (!selectedStudent) return '';\n    return selectedStudent.bioCaption && selectedStudent.bioCaption.trim().length > 0\n      ? selectedStudent.bioCaption\n      : `Congrats to ${selectedStudent.seniorName} on committing to ${selectedStudent.collegeName}!`;\n  }, [selectedStudent]);\n\n  // Reset zoom when the popup is first opened or closed\n  useEffect(() => {\n    if (isPhotoPopupOpen && !wasOpenRef.current) {\n      setIsZoomed(false);\n    }\n    if (!isPhotoPopupOpen) {\n      setIsZoomed(false);\n    }\n    wasOpenRef.current = isPhotoPopupOpen;\n  }, [isPhotoPopupOpen]);\n\n  // Close on Escape (mirrors vanilla zoom popup behavior)\n  useEffect(() => {\n    const handleEsc = (e: KeyboardEvent) => {\n      if (e.key === 'Escape' && isPhotoPopupOpen) {\n        e.preventDefault();\n        setIsZoomed(false);\n        closePhotoPopup();\n      }\n    };\n    if (isPhotoPopupOpen) window.addEventListener('keydown', handleEsc);\n    return () => window.removeEventListener('keydown', handleEsc);\n  }, [isPhotoPopupOpen, closePhotoPopup]);\n\n  const handleNext = (e?: React.MouseEvent | KeyboardEvent) => {\n    e?.stopPropagation?.();\n    if (!selectedStudent || filteredStudents.length === 0) return;\n\n    const currentIndex = filteredStudents.findIndex((s) => s.id === selectedStudent.id);\n    const nextIndex = currentIndex === -1 ? 0 : (currentIndex + 1) % filteredStudents.length;\n\n    openPhotoPopup(filteredStudents[nextIndex]);\n    setIsZoomed(true);\n  };\n\n  const handlePrev = (e?: React.MouseEvent | KeyboardEvent) => {\n    e?.stopPropagation?.();\n    if (!selectedStudent || filteredStudents.length === 0) return;\n\n    const currentIndex = filteredStudents.findIndex((s) => s.id === selectedStudent.id);\n    const prevIndex =\n      currentIndex === -1\n        ? filteredStudents.length - 1\n        : (currentIndex - 1 + filteredStudents.length) % filteredStudents.length;\n\n    openPhotoPopup(filteredStudents[prevIndex]);\n    setIsZoomed(true);\n  };\n\n  // Arrow key navigation only while zoomed (matches original behavior)\n  useEffect(() => {\n    const handleArrow = (e: KeyboardEvent) => {\n      if (!isPhotoPopupOpen || !isZoomed) return;\n      if (e.key === 'ArrowRight') {\n        handleNext(e);\n        e.preventDefault();\n      } else if (e.key === 'ArrowLeft') {\n        handlePrev(e);\n        e.preventDefault();\n      }\n    };\n    window.addEventListener('keydown', handleArrow);\n    return () => window.removeEventListener('keydown', handleArrow);\n  }, [isPhotoPopupOpen, isZoomed, filteredStudents, selectedStudent]);\n\n  if (!isPhotoPopupOpen || !selectedStudent) return null;\n\n  const gradColor = GRAD_CLASS_COLORS[selectedStudent.gradClass] || '#888';\n  const SocialLinks = (\n    <div className=\"flex justify-center gap-4\">\n      {selectedStudent.instagramUrl && (\n        <a\n          href={selectedStudent.instagramUrl}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          className=\"hover:scale-110 transition-transform\"\n        >\n          <img src=\"/logos/instagram.svg\" alt=\"Instagram\" className=\"h-7 w-7\" />\n        </a>\n      )}\n      {selectedStudent.linkedInUrl && (\n        <a\n          href={selectedStudent.linkedInUrl}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          className=\"hover:scale-110 transition-transform\"\n        >\n          <img src=\"/logos/linkedin.svg\" alt=\"LinkedIn\" className=\"h-7 w-7\" />\n        </a>\n      )}\n      {selectedStudent.githubUrl && (\n        <a\n          href={selectedStudent.githubUrl}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          className=\"hover:scale-110 transition-transform\"\n        >\n          <img src=\"/logos/github.svg\" alt=\"GitHub\" className=\"h-7 w-7 dark:invert\" />\n        </a>\n      )}\n    </div>\n  );\n\n  const closeAll = (e?: React.MouseEvent) => {\n    e?.stopPropagation();\n    setIsZoomed(false);\n    closePhotoPopup();\n  };\n\n  const computePreviewPosition = (anchor?: PopupAnchorRect | null) => {\n    if (typeof window === 'undefined') return { top: 24, left: 24, width: 320, maxHeight: 600 };\n    const viewportMargin = 12;\n    const gapFromList = 16;\n    const preferredWidth = 320;\n    const maxLeft = window.innerWidth - preferredWidth - viewportMargin;\n    const maxHeight = Math.max(240, window.innerHeight - viewportMargin * 2);\n\n    if (!anchor) {\n      return { top: viewportMargin, left: Math.max(viewportMargin, maxLeft), width: preferredWidth, maxHeight };\n    }\n\n    let left = anchor.right + gapFromList; // keep a gap from the list scrollbar\n    if (left > maxLeft) {\n      // If pushing right would overflow, place it to the left of the list item\n      left = anchor.left - preferredWidth - gapFromList;\n    }\n    left = Math.max(viewportMargin, Math.min(left, maxLeft));\n\n    const maxTopAllowed = window.innerHeight - maxHeight - viewportMargin;\n    let top = Math.min(anchor.top, Math.max(viewportMargin, maxTopAllowed));\n\n    return { top, left, width: preferredWidth, maxHeight };\n  };\n\n  const previewPos = computePreviewPosition(popupAnchorRect);\n\n  const FloatingPreview = (\n    <div\n      className=\"fixed z-[9999] rounded-xl border border-gray-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 shadow-2xl overflow-hidden\"\n      style={{\n        top: previewPos.top + 50, // larger nudge down for breathing room\n        left: previewPos.left,\n        width: previewPos.width,\n        maxWidth: '90vw',\n        maxHeight: previewPos.maxHeight,\n        overflowY: 'auto'\n      }}\n    >\n          <div className=\"flex items-start justify-between px-4 py-3 border-b border-gray-200 dark:border-neutral-800\">\n            <div className=\"space-y-0.5\">\n              <div className=\"text-sm font-semibold text-gray-900 dark:text-gray-100\">{selectedStudent.seniorName}</div>\n              <button\n                type=\"button\"\n                className=\"text-xs text-blue-600 dark:text-blue-300 font-semibold underline-offset-2 hover:underline\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  window.dispatchEvent(new CustomEvent('center-student-marker', { detail: { id: selectedStudent.id } }));\n                }}\n              >\n                {selectedStudent.collegeName}\n              </button>\n              <div className=\"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400\">\n                <span className=\"px-2 py-0.5 rounded-full text-white font-bold\" style={{ backgroundColor: gradColor }}>\n                  Class of {selectedStudent.gradClass}\n                </span>\n                <span>{selectedStudent.major || 'Undecided'}</span>\n          </div>\n        </div>\n        <button\n          onClick={closeAll}\n          className=\"p-1 text-gray-500 hover:text-red-500 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n          aria-label=\"Close senior photo\"\n        >\n          <X size={18} />\n        </button>\n      </div>\n\n      <div className=\"relative bg-black\">\n        <img\n          src={selectedStudent.seniorPhotoUrl}\n          alt={selectedStudent.seniorName}\n          className=\"w-full object-contain max-h-80 cursor-zoom-in\"\n          onClick={(e) => {\n            e.stopPropagation();\n            setIsZoomed(true);\n          }}\n          onError={(e) => {\n            (e.target as HTMLImageElement).src = selectedStudent.seniorPhotoUrlPng || '/placeholder-logo.png';\n          }}\n        />\n        <div className=\"absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded\">\n          Click to zoom & browse\n        </div>\n      </div>\n\n      <div className=\"px-4 py-3 space-y-3\">\n        <div className=\"text-sm text-gray-700 dark:text-gray-200 whitespace-pre-wrap max-h-32 overflow-y-auto leading-relaxed\">\n          {captionText}\n        </div>\n        <div className=\"pt-3 border-t border-gray-200 dark:border-neutral-800\">{SocialLinks}</div>\n      </div>\n    </div>\n  );\n\n  const ZoomOverlay = (\n    <div\n      className=\"fixed inset-0 z-[10000] bg-black/70 backdrop-blur-sm flex items-center justify-center\"\n      onClick={closeAll}\n    >\n      {filteredStudents.length > 1 && (\n        <>\n          <button\n            onClick={handlePrev}\n            className=\"absolute left-4 top-1/2 -translate-y-1/2 z-[10001] p-3 bg-black/80 text-white rounded-full hover:bg-black/90 transition-colors shadow-xl\"\n            aria-label=\"Previous senior\"\n          >\n            <ChevronLeft size={32} />\n          </button>\n          <button\n            onClick={handleNext}\n            className=\"absolute right-4 top-1/2 -translate-y-1/2 z-[10001] p-3 bg-black/80 text-white rounded-full hover:bg-black/90 transition-colors shadow-xl\"\n            aria-label=\"Next senior\"\n          >\n            <ChevronRight size={32} />\n          </button>\n        </>\n      )}\n\n      <button\n        onClick={closeAll}\n        className=\"absolute top-4 right-4 z-[10002] p-2 bg-black/70 text-white rounded-full hover:bg-red-500 transition-colors shadow-lg\"\n        aria-label=\"Close zoomed photo\"\n      >\n        <X size={22} />\n      </button>\n\n      <div\n        className=\"flex flex-col md:flex-row items-center justify-center gap-6 max-w-6xl w-full h-full px-4\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <div className=\"flex-1 flex items-center justify-center max-h-[90vh] w-full\">\n          <img\n            src={selectedStudent.seniorPhotoUrl}\n            alt={selectedStudent.seniorName}\n            className=\"max-h-[85vh] w-auto object-contain rounded-lg shadow-2xl bg-black\"\n            onError={(e) => {\n              (e.target as HTMLImageElement).src = selectedStudent.seniorPhotoUrlPng || '/placeholder-logo.png';\n            }}\n          />\n        </div>\n\n        <div className=\"w-full md:w-[420px] max-h-[90vh] overflow-y-auto rounded-xl bg-white/95 dark:bg-neutral-900/95 text-gray-900 dark:text-gray-50 shadow-2xl border border-gray-200/70 dark:border-neutral-700/70 p-6 space-y-3\">\n          <div className=\"text-center md:text-left space-y-1\">\n            <div className=\"text-2xl font-bold\">{selectedStudent.seniorName}</div>\n            <div className=\"flex flex-wrap justify-center md:justify-start items-center gap-2 text-sm\">\n              <span className=\"px-3 py-1 rounded-full text-white font-bold\" style={{ backgroundColor: gradColor }}>\n                Class of {selectedStudent.gradClass}\n              </span>\n              <button\n                onClick={() => {\n                  window.dispatchEvent(new CustomEvent('center-student-marker', { detail: { id: selectedStudent.id } }));\n                }}\n                className=\"text-blue-600 dark:text-blue-300 font-semibold underline-offset-2 hover:underline\"\n              >\n                {selectedStudent.collegeName}\n              </button>\n            </div>\n            <div className=\"text-sm text-gray-600 dark:text-gray-300\">{selectedStudent.major || 'Undecided'}</div>\n          </div>\n\n          <div className=\"text-sm whitespace-pre-wrap leading-relaxed text-gray-800 dark:text-gray-200\">\n            {captionText}\n          </div>\n\n          <div className=\"pt-2 border-t border-gray-200 dark:border-neutral-800\">{SocialLinks}</div>\n\n          <div className=\"text-xs text-gray-500 dark:text-gray-400 text-center border-t border-gray-200 dark:border-neutral-800 pt-3\">\n            Use ‚Üê/‚Üí to browse seniors. Click outside the photo or press Esc to exit zoom.\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  // Floating preview mirrors the small popup; zoom overlay mirrors the zoomed view.\n  if (!isZoomed) {\n    return typeof document !== 'undefined' ? createPortal(FloatingPreview, document.body) : null;\n  }\n\n  return typeof document !== 'undefined' ? createPortal(ZoomOverlay, document.body) : null;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2865, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kirk/Downloads/Coding%20Projects/collegemaptest/src/components/ui/TutorialTour.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useMemo, useState } from 'react';\n\ntype Step = {\n  selector: string;\n  title: string;\n  text: string;\n};\n\ntype Position = {\n  top: number;\n  left: number;\n  width: number;\n  height: number;\n};\n\nfunction getHighlightPosition(selector: string, padding = 8): Position | null {\n  if (typeof document === 'undefined') return null;\n  const el = document.querySelector(selector) as HTMLElement | null;\n  if (!el) return null;\n  const rect = el.getBoundingClientRect();\n  return {\n    top: rect.top - padding + window.scrollY,\n    left: rect.left - padding + window.scrollX,\n    width: rect.width + padding * 2,\n    height: rect.height + padding * 2,\n  };\n}\n\nfunction getDescriptionPosition(highlight: Position | null, boxWidth = 320) {\n  if (!highlight) return { top: 80 + window.scrollY, left: 24, arrow: 'top' as const };\n  const margin = 12;\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n\n  // Prefer below\n  if (highlight.top + highlight.height + boxWidth / 2 + margin < viewportHeight + window.scrollY - 40) {\n    return {\n      top: highlight.top + highlight.height + margin,\n      left: Math.min(\n        Math.max(highlight.left + highlight.width / 2 - boxWidth / 2, window.scrollX + 12),\n        window.scrollX + viewportWidth - boxWidth - 12\n      ),\n      arrow: 'top' as const,\n    };\n  }\n  // Else place above\n  return {\n    top: Math.max(highlight.top - margin - 10, window.scrollY + 12),\n    left: Math.min(\n      Math.max(highlight.left + highlight.width / 2 - boxWidth / 2, window.scrollX + 12),\n      window.scrollX + viewportWidth - boxWidth - 12\n    ),\n    arrow: 'bottom' as const,\n  };\n}\n\nexport default function TutorialTour({ onClose }: { onClose?: () => void }) {\n  const steps: Step[] = useMemo(\n    () => [\n      { selector: '#filter-panel-section', title: 'Filters', text: 'Filter by graduating class, major area, and region. Everything updates instantly.' },\n      { selector: '#statistics-section', title: 'Attendance Stats', text: 'Quick totals by region, public/private mix, and top colleges for the current filters.' },\n      { selector: '#trend-section', title: 'Trends', text: 'See how majors, regions, and top colleges change across graduating years.' },\n      { selector: '#student-list-section', title: 'List & Gallery', text: 'Hover to preview, click to open photos, and collapse by class. Use gallery for photo-first browsing.' },\n      { selector: '#map-controls-bar', title: 'Map Controls', text: 'Toggle dark mode, map/satellite, transit layer, reset view, and clear filters.' },\n      { selector: '#map-area', title: 'Interactive Map', text: 'Click markers to open info windows and sync with the list/photo popup.' },\n    ],\n    []\n  );\n\n  const [current, setCurrent] = useState(0);\n  const [isOpen, setIsOpen] = useState(false);\n  const [highlight, setHighlight] = useState<Position | null>(null);\n\n  const openTutorial = () => {\n    setIsOpen(true);\n    setCurrent(0);\n  };\n\n  const closeTutorial = () => {\n    setIsOpen(false);\n    if (onClose) onClose();\n  };\n\n  useEffect(() => {\n    if (!isOpen) return;\n    const update = () => setHighlight(getHighlightPosition(steps[current]?.selector));\n    update();\n    window.addEventListener('resize', update);\n    window.addEventListener('scroll', update, { passive: true });\n    return () => {\n      window.removeEventListener('resize', update);\n      window.removeEventListener('scroll', update);\n    };\n  }, [current, isOpen, steps]);\n\n  if (!isOpen) {\n    return (\n      <button\n        className=\"ml-2 px-3 py-1 text-sm rounded border border-white/40 bg-white/20 text-white hover:bg-white/30 transition-colors\"\n        onClick={openTutorial}\n        type=\"button\"\n      >\n        Tutorial\n      </button>\n    );\n  }\n\n  const step = steps[current];\n  const descPos = getDescriptionPosition(highlight);\n\n  return (\n    <>\n      <div className=\"fixed inset-0 z-[12000] bg-black/60\" onClick={closeTutorial} />\n      {highlight && (\n        <div\n          className=\"fixed z-[12001] border-2 border-blue-400 rounded-md pointer-events-none shadow-[0_0_0_9999px_rgba(0,0,0,0.6)]\"\n          style={{\n            top: highlight.top,\n            left: highlight.left,\n            width: highlight.width,\n            height: highlight.height,\n          }}\n        />\n      )}\n      <div\n        className=\"fixed z-[12002] w-[min(340px,90vw)] bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-700 rounded-lg shadow-2xl p-4 text-sm\"\n        style={{ top: descPos.top, left: descPos.left }}\n      >\n        <div className=\"font-bold text-base mb-1\">{step?.title}</div>\n        <p className=\"text-gray-700 dark:text-gray-300 mb-3 leading-relaxed\">{step?.text}</p>\n        <div className=\"flex items-center justify-between text-xs\">\n          <div className=\"flex items-center gap-2\">\n            <button\n              className=\"px-2 py-1 rounded border border-gray-300 dark:border-neutral-700 bg-gray-100 dark:bg-neutral-800 disabled:opacity-50\"\n              onClick={() => setCurrent((c) => Math.max(0, c - 1))}\n              disabled={current === 0}\n              type=\"button\"\n            >\n              Prev\n            </button>\n            <button\n              className=\"px-2 py-1 rounded border border-gray-300 dark:border-neutral-700 bg-blue-600 text-white hover:bg-blue-700\"\n              onClick={() => {\n                if (current === steps.length - 1) closeTutorial();\n                else setCurrent((c) => Math.min(steps.length - 1, c + 1));\n              }}\n              type=\"button\"\n            >\n              {current === steps.length - 1 ? 'Finish' : 'Next'}\n            </button>\n            <button\n              className=\"px-2 py-1 rounded border border-gray-200 dark:border-neutral-700 bg-white dark:bg-neutral-800\"\n              onClick={closeTutorial}\n              type=\"button\"\n            >\n              Skip\n            </button>\n          </div>\n          <span className=\"text-gray-500 dark:text-gray-400\">\n            Step {current + 1} / {steps.length}\n          </span>\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAiBA,SAAS,qBAAqB,QAAgB,EAAE,UAAU,CAAC;IACzD,IAAI,OAAO,aAAa,aAAa,OAAO;IAC5C,MAAM,KAAK,SAAS,aAAa,CAAC;IAClC,IAAI,CAAC,IAAI,OAAO;IAChB,MAAM,OAAO,GAAG,qBAAqB;IACrC,OAAO;QACL,KAAK,KAAK,GAAG,GAAG,UAAU,OAAO,OAAO;QACxC,MAAM,KAAK,IAAI,GAAG,UAAU,OAAO,OAAO;QAC1C,OAAO,KAAK,KAAK,GAAG,UAAU;QAC9B,QAAQ,KAAK,MAAM,GAAG,UAAU;IAClC;AACF;AAEA,SAAS,uBAAuB,SAA0B,EAAE,WAAW,GAAG;IACxE,IAAI,CAAC,WAAW,OAAO;QAAE,KAAK,KAAK,OAAO,OAAO;QAAE,MAAM;QAAI,OAAO;IAAe;IACnF,MAAM,SAAS;IACf,MAAM,gBAAgB,OAAO,UAAU;IACvC,MAAM,iBAAiB,OAAO,WAAW;IAEzC,eAAe;IACf,IAAI,UAAU,GAAG,GAAG,UAAU,MAAM,GAAG,WAAW,IAAI,SAAS,iBAAiB,OAAO,OAAO,GAAG,IAAI;QACnG,OAAO;YACL,KAAK,UAAU,GAAG,GAAG,UAAU,MAAM,GAAG;YACxC,MAAM,KAAK,GAAG,CACZ,KAAK,GAAG,CAAC,UAAU,IAAI,GAAG,UAAU,KAAK,GAAG,IAAI,WAAW,GAAG,OAAO,OAAO,GAAG,KAC/E,OAAO,OAAO,GAAG,gBAAgB,WAAW;YAE9C,OAAO;QACT;IACF;IACA,mBAAmB;IACnB,OAAO;QACL,KAAK,KAAK,GAAG,CAAC,UAAU,GAAG,GAAG,SAAS,IAAI,OAAO,OAAO,GAAG;QAC5D,MAAM,KAAK,GAAG,CACZ,KAAK,GAAG,CAAC,UAAU,IAAI,GAAG,UAAU,KAAK,GAAG,IAAI,WAAW,GAAG,OAAO,OAAO,GAAG,KAC/E,OAAO,OAAO,GAAG,gBAAgB,WAAW;QAE9C,OAAO;IACT;AACF;AAEe,SAAS,aAAa,EAAE,OAAO,EAA4B;IACxE,MAAM,QAAgB,IAAA,gNAAO,EAC3B,IAAM;YACJ;gBAAE,UAAU;gBAAyB,OAAO;gBAAW,MAAM;YAAoF;YACjJ;gBAAE,UAAU;gBAAuB,OAAO;gBAAoB,MAAM;YAAwF;YAC5J;gBAAE,UAAU;gBAAkB,OAAO;gBAAU,MAAM;YAA4E;YACjI;gBAAE,UAAU;gBAAyB,OAAO;gBAAkB,MAAM;YAAuG;YAC3K;gBAAE,UAAU;gBAAqB,OAAO;gBAAgB,MAAM;YAAiF;YAC/I;gBAAE,UAAU;gBAAa,OAAO;gBAAmB,MAAM;YAAyE;SACnI,EACD,EAAE;IAGJ,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAkB;IAE5D,MAAM,eAAe;QACnB,UAAU;QACV,WAAW;IACb;IAEA,MAAM,gBAAgB;QACpB,UAAU;QACV,IAAI,SAAS;IACf;IAEA,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,QAAQ;QACb,MAAM,SAAS,IAAM,aAAa,qBAAqB,KAAK,CAAC,QAAQ,EAAE;QACvE;QACA,OAAO,gBAAgB,CAAC,UAAU;QAClC,OAAO,gBAAgB,CAAC,UAAU,QAAQ;YAAE,SAAS;QAAK;QAC1D,OAAO;YACL,OAAO,mBAAmB,CAAC,UAAU;YACrC,OAAO,mBAAmB,CAAC,UAAU;QACvC;IACF,GAAG;QAAC;QAAS;QAAQ;KAAM;IAE3B,IAAI,CAAC,QAAQ;QACX,qBACE,8OAAC;YACC,WAAU;YACV,SAAS;YACT,MAAK;sBACN;;;;;;IAIL;IAEA,MAAM,OAAO,KAAK,CAAC,QAAQ;IAC3B,MAAM,UAAU,uBAAuB;IAEvC,qBACE;;0BACE,8OAAC;gBAAI,WAAU;gBAAsC,SAAS;;;;;;YAC7D,2BACC,8OAAC;gBACC,WAAU;gBACV,OAAO;oBACL,KAAK,UAAU,GAAG;oBAClB,MAAM,UAAU,IAAI;oBACpB,OAAO,UAAU,KAAK;oBACtB,QAAQ,UAAU,MAAM;gBAC1B;;;;;;0BAGJ,8OAAC;gBACC,WAAU;gBACV,OAAO;oBAAE,KAAK,QAAQ,GAAG;oBAAE,MAAM,QAAQ,IAAI;gBAAC;;kCAE9C,8OAAC;wBAAI,WAAU;kCAA4B,MAAM;;;;;;kCACjD,8OAAC;wBAAE,WAAU;kCAAyD,MAAM;;;;;;kCAC5E,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,WAAU;wCACV,SAAS,IAAM,WAAW,CAAC,IAAM,KAAK,GAAG,CAAC,GAAG,IAAI;wCACjD,UAAU,YAAY;wCACtB,MAAK;kDACN;;;;;;kDAGD,8OAAC;wCACC,WAAU;wCACV,SAAS;4CACP,IAAI,YAAY,MAAM,MAAM,GAAG,GAAG;iDAC7B,WAAW,CAAC,IAAM,KAAK,GAAG,CAAC,MAAM,MAAM,GAAG,GAAG,IAAI;wCACxD;wCACA,MAAK;kDAEJ,YAAY,MAAM,MAAM,GAAG,IAAI,WAAW;;;;;;kDAE7C,8OAAC;wCACC,WAAU;wCACV,SAAS;wCACT,MAAK;kDACN;;;;;;;;;;;;0CAIH,8OAAC;gCAAK,WAAU;;oCAAmC;oCAC3C,UAAU;oCAAE;oCAAI,MAAM,MAAM;;;;;;;;;;;;;;;;;;;;;AAM9C"}}]
}